<!DOCTYPE html><html><head>
    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Stealth | An framework for creating awesome bots.</title>
    <link rel="stylesheet" href="theme/apex/css/index.css"/>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  </head>
  <body>
    <div class="Wrapper">
      <div class="Container">
        <div class="Header">
          <div class="Title center">
            <img src="../images/logo.svg" alt="Stealth Framework">
          </div>
        </div>

        <div class="Content-wrapper">
          <div class="Sidebar">
            <div class="Menu">

                <div class="item">
                  <a href="#introduction">Introduction</a>
                </div>

                <div class="item">
                  <a href="#getting_started">Getting Started</a>
                </div>

                <div class="item">
                  <a href="#local_development">Local Development</a>
                </div>

                <div class="item">
                  <a href="#the_basics">The Basics</a>
                </div>

                <div class="item">
                  <a href="#sessions">Sessions</a>
                </div>

                <div class="item">
                  <a href="#controllers">Controllers</a>
                </div>

                <div class="item">
                  <a href="#models">Models</a>
                </div>

                <div class="item">
                  <a href="#replies">Replies</a>
                </div>

                <div class="item">
                  <a href="#catch_all">Catch All</a>
                </div>

                <div class="item">
                  <a href="#messaging_integrations">Messaging Integrations</a>
                </div>

                <div class="item">
                  <a href="#nlp_integrations">NLP Integrations</a>
                </div>

                <div class="item">
                  <a href="#analytics_integrations">Analytics Integrations</a>
                </div>

                <div class="item">
                  <a href="#commands">Commands</a>
                </div>

                <div class="item">
                  <a href="#deployment">Deployment</a>
                </div>

            </div>
          </div>

          <div class="Content">

              <div class="Page" id="introduction">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="introduction" href="#introduction">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Introduction</h1>
                <p>Stealth includes everything you need to quickly create powerful Text and Voice bots in Ruby.</p>

<p>Stealth is inspired by the Model-View-Controller (MVC) pattern. However, rather than <em>Views</em> Stealth uses <em>Replies</em>. Model-Reply-Controller (MRC).</p>

<p>The <a href="#models">Model</a> layer represents your domain model (such as Account, User, Quote, etc.) and encapsulates the business logic that is specific to your bot. Stealth uses <a href="#models.active_record">ActiveRecord</a></p>

<p>The <a href="#controllers">Controller</a> layer is responsible for handling incoming requests and providing a appropriate user response (reply).</p>

<p>The <a href="#replies">Reply</a> layer is composed of â€œtemplatesâ€ that are responsible for providing appropriate replies back to the user.</p>

              </div>

              <div class="Page" id="getting_started">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="getting_started" href="#getting_started">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Getting Started</h1>
                <p>To get started install Stealth at the command prompt:</p>

<pre class="chroma">  gem install stealth
</pre>

<p>After, create yourself a new Stealth bot:</p>

<pre class="chroma">  stealth new mybot
</pre>

              </div>

              <div class="Page" id="local_development">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="local_development" href="#local_development">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Local Development</h1>
                <h2 class="Heading"><a class="Anchor" aria-hidden="true" id="local_development.starting_the_server" href="#local_development.starting_the_server">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Starting the Server</h2>

<p>Change directory into to <code>mybot</code>. To boot this bot locally, we recommend the following:</p>

<ol>
<li><p><code>gem install foreman</code></p></li>

<li><p>Start Redis</p></li>

<li><p><code>foreman start -f Procfile.dev</code></p></li>
</ol>

<p>Using <a href="https://github.com/ddollar/foreman">foreman</a> will start the web server and Sidekiq processes together.</p>

<p>You now have default Stealth bot ready for you to start adding functionality to.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="local_development.introspectable_tunnels_to_localhost" href="#local_development.introspectable_tunnels_to_localhost">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Introspectable Tunnels to localhost</h2>

<p>When developing locally, every messaging service requires access to your server. We recommend downloading and using ngrok to create a local tunnel to your development machine. Itâ€™s pretty easy.</p>

<p>First, download ngrok here: <a href="https://ngrok.com/download">https://ngrok.com/download</a></p>

<p>After you download ngrok, start your Stealth server as detailed above. Once Stealth is started, you can open up a public tunnel to your Stealth server and port (default 5000) like this:</p>

<p><code>ngrok http 5000</code></p>

<p>ngrok should then display a unique ngrok local tunnel URL to your machine.</p>

<p>When you provide your URL to the messaging service make sure to place <code>/incoming/&lt;service&gt;</code> after your URL. For example:</p>

<ul>
<li><code>https://abc1234.ngrok.io/incoming/facebook</code></li>
<li><code>https://abc1234.ngrok.io/incoming/twilio</code></li>
</ul>

              </div>

              <div class="Page" id="the_basics">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics" href="#the_basics">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>The Basics</h1>
                <h2 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.directory_structure" href="#the_basics.directory_structure">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Directory Structure</h2>

<p>When you open up your Stealth bot you will see the following file structure:</p>

<pre class="chroma">â”œâ”€â”€ Gemfile
â”œâ”€â”€ Procfile.dev
â”œâ”€â”€ README.md
â”œâ”€â”€ bot
â”‚Â Â  â”œâ”€â”€ controllers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ bot_controller.rb
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ catch_alls_controller.rb
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ goodbyes_controller.rb
â”‚Â Â  â”‚Â Â  â””â”€â”€ hellos_controller.rb
â”‚Â Â  â”œâ”€â”€ flow_map.rb
â”‚Â Â  â”œâ”€â”€ helpers
â”‚Â Â  â”‚Â Â  â””â”€â”€ bot_helper.rb
â”‚Â Â  â””â”€â”€ replies
â”‚Â Â      â”œâ”€â”€ catch_alls
â”‚Â Â      â”‚Â Â  â””â”€â”€ level1.yml
â”‚Â Â      â”œâ”€â”€ goodbyes
â”‚Â Â      â”‚Â Â  â””â”€â”€ say_goodbye.yml
â”‚Â Â      â””â”€â”€ hellos
â”‚Â Â          â””â”€â”€ say_hello.yml
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ boot.rb
â”‚Â Â  â”œâ”€â”€ environment.rb
â”‚Â Â  â”œâ”€â”€ initializers
â”‚Â Â  â”œâ”€â”€ puma.rb
â”‚Â Â  â”œâ”€â”€ services.yml
â”‚Â Â  â””â”€â”€ sidekiq.yml
â””â”€â”€ config.ru
</pre>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.flows" href="#the_basics.flows">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Flows</h2>

<p>A <code>Flow</code> is a general term to describe a complete user interaction with the bot. For example, if a user was using your bot to retrieve a insurance quote. This would be referred to as a <code>Quotes</code> flows.</p>

<p>A flow always has a controller file and itâ€™s associated reply files. It could also include a model file if youâ€™re interacting with data.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.default_flows" href="#the_basics.default_flows">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Default Flows</h2>

<p>When you generate a new Stealth bot it comes packaged with a few default flows to get you started.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.hello_goodbye" href="#the_basics.hello_goodbye">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Hello &amp; Goodbye</h2>

<p>The first ones are the <code>Hello</code> and <code>Goodbye</code> flows. These are blank examples on how to greet (say hello) and dismiss (say goodbye) your users. You are encouraged to customize these flows as you see fit.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.catch_all" href="#the_basics.catch_all">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Catch All</h2>

<p>Stealth also comes packaged with a multi-level <code>Catch All</code> flow. Stealth Catch Alls are designed to handle scenarios in which the user says something the bot is not expecting.</p>

<p>For example, letâ€™s say you <em>ask</em> the user for their 5 digit zip code and the user replies with a city name. You may not handle for city names, only numeric zip codes. The catch all flows are designed to provide an consistent experience to guide the user back on track to providing a 5 digit zip codes.</p>

<p>Itâ€™s recommend that bot designers and developers spend sufficient time strategizing around these flows.</p>

<p>See the Catch All (#catchalls) section for more information on how Stealth handles <code>Catch All</code> flows.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.say_ask_get" href="#the_basics.say_ask_get">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Say, Ask, Get</h2>

<p>Stealth recommends follows the Say, Ask, Get prefix for both controller actions and replies.</p>

<h3 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.say_ask_get.say" href="#the_basics.say_ask_get.say">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>SAY</h3>

<p><em>SAY</em> Stealth actions are for <em>saying</em> something to the user.</p>

<p>For example:</p>

<pre class="chroma">  <span class="k">def</span> <span class="nf">say_hello</span>
    <span class="n">send_replies</span>
  <span class="k">end</span>
</pre>

<h3 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.say_ask_get.ask" href="#the_basics.say_ask_get.ask">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>ASK</h3>

<p><em>ASK</em> Stealth actions are for <em>asking</em> something from the user.</p>

<p>For example:</p>

<pre class="chroma">  <span class="k">def</span> <span class="nf">ask_weather</span>
    <span class="n">send_replies</span>
    <span class="n">update_session_to</span> <span class="ss">state</span><span class="p">:</span> <span class="s1">&#39;get_weather_reponse&#39;</span>
  <span class="k">end</span>
</pre>

<h3 class="Heading"><a class="Anchor" aria-hidden="true" id="the_basics.say_ask_get.get" href="#the_basics.say_ask_get.get">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>GET</h3>

<p><em>GET</em> Stealth actions are for <em>getting</em> and parsing the reponse from the user.</p>

<p>For example:</p>

<pre class="chroma">  <span class="k">def</span> <span class="nf">get_weather_reponse</span>
    <span class="k">if</span> <span class="n">current_message</span><span class="o">.</span><span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;Sunny&#39;</span>
      <span class="n">step_to</span> <span class="ss">state</span><span class="p">:</span> <span class="s2">&#34;say_wear_sunglasses&#34;</span>
    <span class="k">elsif</span> <span class="n">current_message</span><span class="o">.</span><span class="n">message</span> <span class="o">==</span> <span class="s1">&#39;Raining&#39;</span>
      <span class="n">step_to</span> <span class="ss">state</span><span class="p">:</span> <span class="s2">&#34;say_dont_forget_umbrella&#34;</span>
    <span class="k">end</span>
  <span class="k">end</span>
</pre>

              </div>

              <div class="Page" id="sessions">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="sessions" href="#sessions">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Sessions</h1>
                <h2 class="Heading"><a class="Anchor" aria-hidden="true" id="sessions.state_machines" href="#sessions.state_machines">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>State Machines</h2>

<p>TODO: Need to understand more about how Stealth handles the itâ€™s session around State Machines.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="sessions.redis_backed_sessions" href="#sessions.redis_backed_sessions">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Redis Backed Sessions</h2>

<p>TODO Need to understand how redis fits in here.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="sessions.current_user" href="#sessions.current_user">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>current_user</code></h2>

<p>The user is available to you at anytime using <code>current_user</code>.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="sessions.current_session" href="#sessions.current_session">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>current_session</code></h2>

<p>The usersâ€™ session is available to you at anytime using <code>current_session</code>.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="sessions.current_message" href="#sessions.current_message">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>current_message</code></h2>

<p>The usersâ€™ current message is available to you at anytime using <code>current_message</code>. Note: <code>current_message</code> is full payload back from the specific messaging service.</p>

<p>For example:</p>

<pre class="chroma">if current_message.message = &#34;hello&#34;
  step_to flow: &#39;hello&#39;, state: &#39;say_hello&#39;
end
</pre>

              </div>

              <div class="Page" id="controllers">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="controllers" href="#controllers">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Controllers</h1>
                <p>Controllers are responsible for handling incoming requests and providing a appropriate response back to the user (replies). Every Stealth project comes with a default <code>bot_controller.rb</code></p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="controllers.bot_controller_rb" href="#controllers.bot_controller_rb">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>bot_controller.rb</code></h2>

<pre class="chroma"><span class="k">class</span> <span class="nc">BotController</span> <span class="o">&lt;</span> <span class="no">Stealth</span><span class="o">::</span><span class="no">Controller</span>

  <span class="n">before_action</span> <span class="ss">:current_user</span>

  <span class="k">def</span> <span class="nf">route</span>
    <span class="k">if</span> <span class="n">current_message</span><span class="o">.</span><span class="n">payload</span><span class="o">.</span><span class="n">present?</span>
      <span class="n">handle_payloads</span>
      <span class="n">current_message</span><span class="o">.</span><span class="n">payload</span> <span class="o">=</span> <span class="kp">nil</span>
      <span class="k">return</span>
    <span class="k">end</span>

    <span class="k">if</span> <span class="n">current_session</span><span class="o">.</span><span class="n">present?</span>
      <span class="n">step_to</span> <span class="ss">session</span><span class="p">:</span> <span class="n">current_session</span>
    <span class="k">else</span>
      <span class="n">step_to</span> <span class="ss">flow</span><span class="p">:</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="ss">state</span><span class="p">:</span> <span class="s1">&#39;say_hello&#39;</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="controllers.stepping_and_updating_sessions" href="#controllers.stepping_and_updating_sessions">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Stepping and Updating Sessions</h2>

<p>Stealth provides a few built in methods to help you navigate a user through you bot.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="controllers.step_to" href="#controllers.step_to">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>step_to</code></h2>

<p>The <code>step_to</code> is used to move the user to another flow and/or state. <code>step_to</code> can accept either a <em>flow</em> or a <em>state</em>, or both. For example:</p>

<p><code>step_to flow: &#39;hello&#39;</code> - This would redirect the user to the <code>hello</code> flow and start the <em>first</em> state in that flow as defined by the <code>flow_map.rb</code> file</p>

<p><code>step_to state: &#39;say_hello&#39;</code> - This would redirect the user to the <code>say_hello</code> state inside the current flow.</p>

<p><code>step_to flow: &#39;hello&#39;, state: &#39;say_hello&#39;</code> - This would redirect the user to the <code>hello</code> flow and start the <code>say_hello</code> state.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="controllers.update_session_to" href="#controllers.update_session_to">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>update_session_to</code></h2>

<p>Similar to <code>step_to</code>, <code>update_session_to</code> is used to update the userâ€™s session to a current flow and/or state. It accepts the same parameters.</p>

<p><code>update_session_to flow: &#39;quote&#39;</code> - This would update the users session to the <code>quote</code> flow and use the <em>first</em> state in that flow as defined by the <code>flow_map.rb</code> file</p>

<p><code>update_session_to state: &#39;ask_zip_code&#39;</code> - This would update the users session to the <code>ask_zip_code</code> state inside the current flow.</p>

<p><code>step_to flow: &#39;quote&#39;, state: &#39;ask_zip_code&#39;</code> - This would update the users session to <code>quote</code> flow and the <code>ask_zip_code</code> state.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="controllers.send_replies" href="#controllers.send_replies">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>send_replies</code></h2>

<p><code>send_replies</code> is used to trigger the associated reply files. For example:</p>

<pre class="chroma"><span class="k">def</span> <span class="nf">say_contact_us</span>
  <span class="n">send_replies</span>
<span class="k">end</span>
</pre>

              </div>

              <div class="Page" id="models">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="models" href="#models">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Models</h1>
                <p>The power of three. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="models.active_record" href="#models.active_record">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>ActiveRecord</h2>

<p>The power of three. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="models.configuration" href="#models.configuration">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Configuration</h2>

<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="models.migrations" href="#models.migrations">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Migrations</h2>

<p>The power of three. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="models.generating" href="#models.generating">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Generating</h2>

<p>The power of three. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="models.running" href="#models.running">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Running</h2>

<p>The power of three. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

              </div>

              <div class="Page" id="replies">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="replies" href="#replies">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Replies</h1>
                <p>Stealth replies are used to send one or many <em>reply types</em> back to the user. Reply types are dependent on the specific messaging service youâ€™re using. Each messaging integration will detail itâ€™s supported reply types in itâ€™s respective docs.</p>

<p>However, here is a generic reply using text, delays, and suggestions.</p>

<pre class="chroma">-<span class="w"> </span>reply_type<span class="p">:</span><span class="w"> </span>text<span class="w">
</span><span class="w">  </span>text<span class="p">:</span><span class="w"> </span><span class="s2">&#34;Hello. Welcome to our Bot.&#34;</span><span class="w">
</span><span class="w"></span>-<span class="w"> </span>reply_type<span class="p">:</span><span class="w"> </span>delay<span class="w">
</span><span class="w">  </span>duration<span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="w"></span>-<span class="w"> </span>reply_type<span class="p">:</span><span class="w"> </span>text<span class="w">
</span><span class="w">  </span>text<span class="p">:</span><span class="w"> </span><span class="s2">&#34;We&#39;re here to help you learn more about something or another.&#34;</span><span class="w">
</span><span class="w"></span>-<span class="w"> </span>reply_type<span class="p">:</span><span class="w"> </span>delay<span class="w">
</span><span class="w">  </span>duration<span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="w"></span>-<span class="w"> </span>reply_type<span class="p">:</span><span class="w"> </span>text<span class="w">
</span><span class="w">  </span>text<span class="p">:</span><span class="w"> </span><span class="s1">&#39;By using the &#34;Yes&#34; and &#34;No&#34; buttons below, are you interested in do you want to continue?&#39;</span><span class="w">
</span><span class="w">  </span>suggestions<span class="p">:</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>text<span class="p">:</span><span class="w"> </span><span class="s2">&#34;Yes&#34;</span><span class="w">
</span><span class="w">    </span>-<span class="w"> </span>text<span class="p">:</span><span class="w"> </span><span class="s2">&#34;No&#34;</span><span class="w">
</span><span class="w"></span></pre>

              </div>

              <div class="Page" id="catch_all">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="catch_all" href="#catch_all">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Catch All</h1>
                <p>Stealth Catch Alls are designed to handle the most common scenario inside of a bot. What happens when the user says something the bot doesnâ€™t understand. The majority of bots will simply respond back with a generic â€œI donâ€™t understandâ€ and expect the user to figure it out. While this experience might be ok for some bots, we created a more advanced way of handling these experiences. The better your Catch Alls, the better your bot.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="catch_all.triggering" href="#catch_all.triggering">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Triggering</h2>

<p>Catch all flows are automatically triggered when a controller action does not successfully <code>update_session_to</code> or <code>step_to</code>. This could be when a user says something thatâ€™s not handled or even a API call 500â€™s.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="catch_all.multi_level" href="#catch_all.multi_level">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Multi Level</h2>

<p>Stealth also keeps track of how many times the catch all is triggered. This allows you to build experiences in which the user is provided different responses for the 2nd or 3rd time.</p>

<p>By default a Stealth bot comes with the first level catch all. For example here is the controller action and associated reply:</p>

<pre class="chroma"><span class="k">def</span> <span class="nf">level1</span>
  <span class="n">send_replies</span>

  <span class="k">if</span> <span class="n">previous_session_specifies_fails_to?</span>
    <span class="n">step_to</span> <span class="ss">flow</span><span class="p">:</span> <span class="n">previous_session</span><span class="o">.</span><span class="n">flow_string</span><span class="p">,</span> <span class="ss">state</span><span class="p">:</span> <span class="n">previous_state</span><span class="o">.</span><span class="n">to_s</span>
  <span class="k">else</span>
    <span class="n">step_to</span> <span class="ss">session</span><span class="p">:</span> <span class="n">previous_session</span> <span class="o">-</span> <span class="mi">2</span><span class="o">.</span><span class="n">states</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>

<pre class="chroma">-<span class="w"> </span>reply_type<span class="p">:</span><span class="w"> </span>text<span class="w">
</span><span class="w">  </span>text<span class="p">:</span><span class="w"> </span>Opps.<span class="w"> </span>It<span class="w"> </span>looks<span class="w"> </span>like<span class="w"> </span>something<span class="w"> </span>went<span class="w"> </span>wrong.<span class="w"> </span>Let&#39;s<span class="w"> </span>try<span class="w"> </span>that<span class="w"> </span>again<span class="w">
</span><span class="w"></span></pre>

<p>If you would like to expand the experience simply add a <code>level2</code> controller action and associated reply. You can go as far as you want. Catch Alls have no limit just make sure you increment using the standardized method names of <code>level1</code>, <code>level2</code>, <code>level3</code>, <code>level4</code>, etc.</p>

              </div>

              <div class="Page" id="messaging_integrations">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="messaging_integrations" href="#messaging_integrations">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Messaging Integrations</h1>
                <p>Stealth is designed for your bot to support one or many Messaging Services. For example, this could be SMS or both SMS and Facebook messenger. Messaging Integrations can be attached to your Stealth bot by adding the messaging integration gem to your <code>Gemfile</code>.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="messaging_integrations.gemfile" href="#messaging_integrations.gemfile">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>Gemfile</code></h2>

<pre class="chroma">source &#39;https://rubygems.org&#39;

ruby &#39;2.5.1&#39;

gem &#39;stealth&#39;, &#39;~&gt; 0.10.0&#39;

# Uncomment to enable the Stealth Facebook Driver
# gem &#39;stealth-facebook&#39;

# Uncomment to enable the Stealth Twilio SMS Driver
# gem &#39;stealth-twilio&#39;
</pre>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="messaging_integrations.services_yml" href="#messaging_integrations.services_yml">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>services.yml</code></h2>

<pre class="chroma">default<span class="p">:</span><span class="w"> </span><span class="cp">&amp;default</span><span class="w">
</span><span class="w">  </span><span class="c"># ==========================================</span><span class="w">
</span><span class="w">  </span><span class="c"># ===== Example Facebook Service Setup =====</span><span class="w">
</span><span class="w">  </span><span class="c"># ==========================================</span><span class="w">
</span><span class="w">  </span><span class="c"># facebook:</span><span class="w">
</span><span class="w">  </span><span class="c">#   verify_token: XXXFACEBOOK_VERIFY_TOKENXXX</span><span class="w">
</span><span class="w">  </span><span class="c">#   page_access_token: XXXFACEBOOK_ACCESS_TOKENXXX</span><span class="w">
</span><span class="w">  </span><span class="c">#   setup:</span><span class="w">
</span><span class="w">  </span><span class="c">#     greeting: # Greetings are broken up by locale</span><span class="w">
</span><span class="w">  </span><span class="c">#       - locale: default</span><span class="w">
</span><span class="w">  </span><span class="c">#         text: &#34;Welcome to the Stealth bot ğŸ¤–&#34;</span><span class="w">
</span><span class="w">  </span><span class="c">#     persistent_menu:</span><span class="w">
</span><span class="w">  </span><span class="c">#       - type: payload</span><span class="w">
</span><span class="w">  </span><span class="c">#         text: Main Menu</span><span class="w">
</span><span class="w">  </span><span class="c">#         payload: main_menu</span><span class="w">
</span><span class="w">  </span><span class="c">#       - type: url</span><span class="w">
</span><span class="w">  </span><span class="c">#         text: Visit our website</span><span class="w">
</span><span class="w">  </span><span class="c">#         url: https://example.com</span><span class="w">
</span><span class="w">  </span><span class="c">#       - type: call</span><span class="w">
</span><span class="w">  </span><span class="c">#         text: Call us</span><span class="w">
</span><span class="w">  </span><span class="c">#         payload: &#34;+4155330000&#34;</span><span class="w">
</span><span class="w">  </span><span class="c">#</span><span class="w">
</span><span class="w">  </span><span class="c"># ===========================================</span><span class="w">
</span><span class="w">  </span><span class="c"># ======== Example SMS Service Setup ========</span><span class="w">
</span><span class="w">  </span><span class="c"># ===========================================</span><span class="w">
</span><span class="w">  </span><span class="c"># twilio:</span><span class="w">
</span><span class="w">  </span><span class="c">#   account_sid: XXXTWILIO_ACCOUNT_SIDXXX</span><span class="w">
</span><span class="w">  </span><span class="c">#   auth_token: XXXTWILIO_AUTH_TOKENXXX</span><span class="w">
</span><span class="w">  </span><span class="c">#   from_phone: +14155330000</span><span class="w">
</span><span class="w">
</span><span class="w"></span>production<span class="p">:</span><span class="w">
</span><span class="w">  </span>&lt;&lt;<span class="p">:</span><span class="w"> </span><span class="cp">*default</span><span class="w">
</span><span class="w"></span>development<span class="p">:</span><span class="w">
</span><span class="w">  </span>&lt;&lt;<span class="p">:</span><span class="w"> </span><span class="cp">*default</span><span class="w">
</span><span class="w"></span>test<span class="p">:</span><span class="w">
</span><span class="w">  </span>&lt;&lt;<span class="p">:</span><span class="w"> </span><span class="cp">*default</span><span class="w">
</span><span class="w">
</span><span class="w"></span></pre>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="messaging_integrations.sealth_setup" href="#messaging_integrations.sealth_setup">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a><code>sealth setup</code></h2>

<p>Most Messaging integrations require a initial setup. For example, Facebook requires you to send a payload to define the default greeting and persistent menu. You can accomplish this by running the <code>stealth setup</code> followed by the integration. For example:</p>

<p><code>stealth setup facebook</code></p>

<p>Make sure to reference the specific messaging integration for more specifics.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="messaging_integrations.officially_supported" href="#messaging_integrations.officially_supported">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Officially Supported</h2>

<p>Right now, Stealth officially supports Facebook Messenger and SMS through Twilio. While we plan to add more integrations in the future please feel free to add your own and let us know so we can keep this list updated. ğŸ˜</p>

<p>Please check out the integration docs here:</p>

<ul>
<li><a href="https://github.com/hellostealth/stealth-facebook">Facebook Messenger</a></li>
<li><a href="https://github.com/hellostealth/stealth-twilio">SMS (Twillio)</a></li>
</ul>

              </div>

              <div class="Page" id="nlp_integrations">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="nlp_integrations" href="#nlp_integrations">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>NLP Integrations</h1>
                <p>Like Messaging Inetegrations, Stealth also has official support for NLP and Machine Learning using Amazon Comprehend using our gem <code>stealth-aws-comprehend</code></p>

<p>This gem adds the following methods to <code>current_message</code>:</p>

<ol>
<li><p><code>language</code> identifies text written in over 100 languages and returns the dominant language in <code>current_message</code> with a confidence score</p></li>

<li><p><code>entities</code> returns the named entities (â€œPeople,â€ â€œPlaces,â€ â€œLocations,â€ etc.) present in <code>current_message</code></p></li>

<li><p><code>key_phrases</code> returns the key phrases or talking points and a confidence score to support for the <code>current_message</code></p></li>

<li><p><code>sentiment</code> returns the overall sentiment (Positive, Negative, Neutral, or Mixed) for the <code>current_message</code></p></li>

<li><p><code>sentiment_score</code> returns the scoring for each sentiment (Positive, Negative, Neutral, or Mixed) for the <code>current_message</code></p></li>
</ol>

<p>Checkout the official <a href="https://github.com/hellostealth/stealth-aws-comprehend">stealth-aws-comprehend</a> docs for more information.</p>

              </div>

              <div class="Page" id="analytics_integrations">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="analytics_integrations" href="#analytics_integrations">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Analytics Integrations</h1>
                <p>Weâ€™ve created an official gem for <a href="https://mixpanel.com">Mixpanel</a> support.</p>

<p>This gem automatically tracks State Changes. They are sent to Mixpanel each time a state transition takes place. The userâ€™s <code>recipient_id</code> is sent to Mixpanel as the <code>distinct_id</code>. Additional properties for flow and state are also sent with the event. This allows you to build custom funnels and custom events as you wish.</p>

<p>Checkout the official <a href="https://github.com/hellostealth/stealth-mixpanel">stealth-mixpanel</a> docs for more information.</p>

              </div>

              <div class="Page" id="commands">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="commands" href="#commands">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Commands</h1>
                <p>Stealth provides the <code>stealth</code> command-line program, used to generate bots, generate flows, start a console, run driver setup tasks and run the server.</p>

<p>To view details for a command at any time use <code>stealth help</code>.</p>

<pre class="chroma">Usage:

  stealth [&lt;flags&gt;] &lt;command&gt; [&lt;args&gt; ...]

Flags:

  -h, --help           Output usage information.
  -C, --chdir=&#34;.&#34;      Change working directory.
  -v, --verbose        Enable verbose log output.
      --format=&#34;text&#34;  Output formatter.
      --version        Show application version.

Commands:
  stealth clear_sessions  # Clears all sessions in development
  stealth console         # Starts a stealth console
  stealth generate        # Generates scaffold Stealth files
  stealth help [COMMAND]  # Describe available commands or one specific command
  stealth new [NAME]      # Creates a new Stealth bot
  stealth server          # Starts a stealth server
  stealth setup           # Runs setup tasks for a specified service
  stealth version         # Prints stealth version

Examples:

  Start a new Stealth project.
  $ steath new [BOT NAME]

  Generate a new flow inside your Stealth project.
  $ stealth generate flow [FLOW NAME]

  Run setup tasks for a specific driver.
  $ stealth setup [INTEGRATION NAME]

  Start a Stealth console.
  $ stealth console
</pre>

              </div>

              <div class="Page" id="deployment">
                <h1 class="Heading"><a class="Anchor" aria-hidden="true" id="deployment" href="#deployment">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Deployment</h1>
                <p>Stealth is a rack based web app. Which means it can be hosted on virtually anything. Virtual or Physical servers. However, we recommend Heroku because of itâ€™s simplicity of deployment.</p>

<h2 class="Heading"><a class="Anchor" aria-hidden="true" id="deployment.deploying_on_heroku" href="#deployment.deploying_on_heroku">
	<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
</a>Deploying on Heroku</h2>

<p>Since Stealth is a Ruby based Rack app, it supports deploying to <a href="http://herokuapp.com">Heroku</a> out of the box. Here is quick guide to get you started.</p>

<p>If you havenâ€™t, make sure to track your bot in Git</p>

<pre class="chroma">  $ git init
  Initialized empty Git repository in .git/
  $ git add .
  $ git commit -m &#34;My first commit&#34;
  Created initial commit 5df2d09: My first commit
   42 files changed, 470 insertions(+)
    create mode 100644 Gemfile
    create mode 100644 Gemfile.lock
    create mode 100644 Procfile
  ...
</pre>

<p>After you have your bot tracked with Git, youâ€™re ready to deploy to Heroku. Next, weâ€™ll add our bot to Heroku using:</p>

<pre class="chroma">$ heroku apps:create &lt;BOT NAME&gt;
</pre>

<p>Then deploy your bot to Heroku.</p>

<pre class="chroma">$ git push heroku master
</pre>

<p>Once deployed, make sure to enable both the <code>Heroku Postgres</code> and <code>Heroku Redis</code> addons. Additionally, make sure you run any <code>stealth setup</code> commands to configure your messaging service webhooks for your new production environments.</p>

              </div>

            <div class="Footer"></div>
            <script src="theme/apex/js/index.js"></script>
          </div>
        </div>
    </div>


</div></body></html>
